generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Profile {
  id        String   @id @db.Uuid
  full_name String?
  role      String   @default("seller") // "seller" | "market"
  market_id String?  @db.Uuid
  updated_at DateTime @updated_at

  market    Market?  @relation(fields: [market_id], references: [id])
  
  @@map("profiles")
}

model Market {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name      String
  address   String?
  phone     String?
  created_at DateTime @default(now())
  updated_at DateTime @updated_at

  profiles  Profile[]
  entries   Entry[]

  @@map("markets")
}

model Entry {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  market_id   String   @db.Uuid
  product_name String
  quantity    Int
  price       Float
  total       Float
  created_at  DateTime @default(now())
  updated_at  DateTime @updated_at

  market      Market   @relation(fields: [market_id], references: [id])

  @@map("entries")
}
